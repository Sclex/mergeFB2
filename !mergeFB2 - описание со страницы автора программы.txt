Описание со страницы автора программы (Sven Karsten):

https://web.archive.org/web/20140429050817/https://sites.google.com/site/svenkarsten/projects/proekt-mergefb2


Проект mergeFB2
MergeFB2 Logo
MergeFB2 - это программа для объединения нескольких FB2-файлов в один сборник. 
(Ссылки на скачивание вы найдете внизу страницы. Текущая версия: 1.0.2)

Программа имеет два режима работы - интерактивный и консольный.

В консольном режиме программа в алфавитном порядке объединяет все FB2-файлы (например, рассказы), которые найдет в рабочей папке. Название первого рассказа станет названием сборника. Поэтому рекомендуется нумеровать FB2-файлы перед объединением. Результатом работы программы станет файл output.fb2, содержащий объединенный сборник.

Интерактивный режим запускается тогда, когда программа не находит в рабочей папке ни одного FB2-файла, предназначенного для объединения (файл output.fb2 не в счет). Такое происходит, например, при запуске программы из пустой папки.

Скриншот окна программы:




Добавление FB2-файлов в список для объединения - по кнопке Add FB2 (поддерживается одновременное добавление нескольких файлов с помощью клавиш Shift и Ctrl) или с помощью простого перетаскивания FB2-файлов в окно программы из Проводника. Удаление файлов из списка - по кнопке Delete FB2.

Строчки списка можно перемещать вверх-вниз с помощью кнопок Up и Down. Первый в списке рассказ, как и прежде, дает название всему сборнику, если не указано новое имя в окне Опций.

Список можно сохранить в файле проекта (с расширением mfb2) и позднее загрузить для повторной работы с помощью кнопок Open Project и Save Project.

Кнопка Options открывает новое окно, в котором можно выбрать для сборника другую картинку обложки, взамен стандартной, указать желаемую папку для сохранения файла сборника, и выбрать для сборника новое название.



Например, Если вы впишите в поле New Book Title название Лунная пыль, то в описании FB2-файла будет указано: Сборник "Лунная пыль". Если же вы оставите поле New Book Title пустым, то сборнику будет автоматически дано название по первому рассказу сборника. Само слово "Сборник", таким образом, писать не требуется.

Картинка обложки будет автоматически масштабирована до размера 200х310 пикселов.

Объединение файлов в сборник происходит по нажатию кнопки Start merging. Через несколько секунд будет создан новый файл output.fb2. Если же в рабочей (или целевой) папке уже имелся файл с таким именем, он будет переименован в #########_output.bak (где в начале названия будет стоять время переименования файла).

В процессе объединения в исходных файлах будут автоматически исправлены некоторые ошибки верстки, например - стандартизированы примечания, объединены двойные заголовки, удалены лишние секции и т.д. На выходе вы с большой вероятностью получите валидный (соответствующий стандартам) файл сборника.

Программа относится к Open Source и распространяется бесплатно. Вы можете дорабатывать алгоритм программы, однако я прошу не изменять название программы и не уменьшать список ее авторов.

Я выражаю глубокую признательность KiR'у за написание объединяющего скрипта (без которого не было бы и самой программы), Marine_Ch за алгоритм подсчета секций и, конечно, ТаКир'у за конструктивную критику, интересные идеи и терпеливый бета-тестинг.

Приятной вам работы и валидных сборников!

mergeFB2.zip (3056k)Sven Karsten, 04 апр. 2011 г., 11:59

mergeFB2_source.zip (2815k)Sven Karsten, 04 апр. 2011 г., 11:59